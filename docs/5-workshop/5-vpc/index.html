<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.149.0">
    <meta name="description" content="AWS MLOps Retail Prediction Platform Documentation">
<meta name="author" content="Nguy·ªÖn Thanh Nh√¢n &amp; H√† Kh·∫£ Nguy√™n">

    <link rel="icon" href="/aws-mlops-retail-prediction/images/favicon.png" type="image/png">

    <title>Production Networking :: AWS MLOps Docs</title>

    
    <link href="/aws-mlops-retail-prediction/css/nucleus.css?1765387715" rel="stylesheet">
    <link href="/aws-mlops-retail-prediction/css/fontawesome-all.min.css?1765387715" rel="stylesheet">
    <link href="/aws-mlops-retail-prediction/css/hybrid.css?1765387715" rel="stylesheet">
    <link href="/aws-mlops-retail-prediction/css/featherlight.min.css?1765387715" rel="stylesheet">
    <link href="/aws-mlops-retail-prediction/css/perfect-scrollbar.min.css?1765387715" rel="stylesheet">
    <link href="/aws-mlops-retail-prediction/css/auto-complete.css?1765387715" rel="stylesheet">
    <link href="/aws-mlops-retail-prediction/css/atom-one-dark-reasonable.css?1765387715" rel="stylesheet">
    <link href="/aws-mlops-retail-prediction/css/theme.css?1765387715" rel="stylesheet">
    <link href="/aws-mlops-retail-prediction/css/hugo-theme.css?1765387715" rel="stylesheet">
    
    <link href="/aws-mlops-retail-prediction/css/theme-workshop.css?1765387715" rel="stylesheet">
    
    <link href="/aws-mlops-retail-prediction/css/custom-image-border.css?1765387715" rel="stylesheet">

    <script src="/aws-mlops-retail-prediction/js/jquery-3.3.1.min.js?1765387715"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    <style type="text/css">
 
.content figure img, .content p img, img.bordered-image {
  border: 2px solid black !important;
  padding: 5px !important;
  margin: 10px auto !important;
  display: block !important;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3) !important;
}

 
img {
  margin: 10px auto !important;
  display: block !important;
}

 
figure {
  text-align: center !important;
  margin: 10px auto !important;
}

 
.content figure figcaption {
  text-align: center;
  font-style: italic;
  margin-top: 5px;
  font-weight: bold;
}

 
.content p img {
  margin: 10px auto !important;
  display: block !important;
}

 
.content p {
  text-align: center;
}

.content p:not(:has(img)) {
  text-align: left;
}
</style>

  </head>
  <body class="" data-url="/aws-mlops-retail-prediction/5-workshop/5-vpc/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/aws-mlops-retail-prediction/js/lunr.min.js?1765387715"></script>
<script type="text/javascript" src="/aws-mlops-retail-prediction/js/auto-complete.js?1765387715"></script>
<script type="text/javascript">
    var baseurl = "https:\/\/nguyenhk64.github.io\/aws-mlops-retail-prediction\/";
</script>
<script type="text/javascript" src="/aws-mlops-retail-prediction/js/search.js?1765387715"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">
        
          
          




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/" title="Worklog" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/">
           <b> 1. </b> Worklog
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.1-week1/" title="Week 1 - Introduction to AWS" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.1-week1/">
           <b> 1.1. </b> Week 1 - Introduction to AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.2-week2/" title="Week 2 - Networking on AWS" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.2-week2/">
           <b> 1.2. </b> Week 2 - Networking on AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.3-week3/" title="Week 3 - Compute VM Service on AWS" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.3-week3/">
           <b> 1.3. </b> Week 3 - Compute VM Service on AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.4-week4/" title="Week 4 - Storage Service on AWS" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.4-week4/">
           <b> 1.4. </b> Week 4 - Storage Service on AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.5-week5/" title="Week 5 - Security Services on AWS" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.5-week5/">
           <b> 1.5. </b> Week 5 - Security Services on AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.6-week6/" title="Week 6 - Database Service on AWS" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.6-week6/">
           <b> 1.6. </b> Week 6 - Database Service on AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.7-week7/" title="Week 7 - DataLake Service on AWS" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.7-week7/">
           <b> 1.7. </b> Week 7 - DataLake Service on AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.8-week8/" title="Week 8 - Serverless Compute" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.8-week8/">
           <b> 1.8. </b> Week 8 - Serverless Compute
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.9-week9/" title="Week 9 - Container Compute" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.9-week9/">
           <b> 1.9. </b> Week 9 - Container Compute
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.10-week10/" title="Week 10 - DevOps &amp; IaC" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.10-week10/">
           <b> 1.10. </b> Week 10 - DevOps &amp; IaC
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.11-week11/" title="Week 11 - Observability &amp; FinOps" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.11-week11/">
           <b> 1.11. </b> Week 11 - Observability &amp; FinOps
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/1-worklog/1.12-week12/" title="Week 12 - Capstone: Personal Project" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/1-worklog/1.12-week12/">
           <b> 1.12. </b> Week 12 - Capstone: Personal Project
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/2-proposal/" title="Proposal" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/2-proposal/">
           <b> 2. </b> Proposal
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/" title="Translated blogs" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/">
           <b> 3. </b> Translated blogs
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.1-blog1/" title="C√¥ng b·ªë c√°c ƒê·ªëi t√°c AWS c·ªßa NƒÉm 2025 khu v·ª±c ch√¢u √Çu, Trung ƒê√¥ng v√† ch√¢u Phi" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.1-blog1/">
           <b> 3.1. </b> C√¥ng b·ªë c√°c ƒê·ªëi t√°c AWS c·ªßa NƒÉm 2025 khu v·ª±c ch√¢u √Çu, Trung ƒê√¥ng v√† ch√¢u Phi
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.2-blog2/" title="C√°ch t√πy ch·ªânh ph·∫£n h·ªìi ƒë·ªëi v·ªõi c√°c cu·ªôc t·∫•n c√¥ng DDoS t·∫ßng 7 b·∫±ng AWS WAF Anti-DDoS AMR" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.2-blog2/">
           <b> 3.2. </b> C√°ch t√πy ch·ªânh ph·∫£n h·ªìi ƒë·ªëi v·ªõi c√°c cu·ªôc t·∫•n c√¥ng DDoS t·∫ßng 7 b·∫±ng AWS WAF Anti-DDoS AMR
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.3-blog3/" title="AWS Marketplace: Ch·∫•t x√∫c t√°c cho vi·ªác hi·ªán ƒë·∫°i h√≥a mua s·∫Øm li√™n bang" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.3-blog3/">
           <b> 3.3. </b> AWS Marketplace: Ch·∫•t x√∫c t√°c cho vi·ªác hi·ªán ƒë·∫°i h√≥a mua s·∫Øm li√™n bang
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.4-blog4/" title="T√≠ch h·ª£p d·ªØ li·ªáu S&amp;P Global m·ªü r·ªông kh·∫£ nƒÉng Amazon QuickSight Research" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.4-blog4/">
           <b> 3.4. </b> T√≠ch h·ª£p d·ªØ li·ªáu S&amp;P Global m·ªü r·ªông kh·∫£ nƒÉng Amazon QuickSight Research
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.5-blog5/" title="C√°ch VƒÉn ph√≤ng T·ªïng ch∆∞·ªüng l√Ω Qu·∫≠n Contra Costa hi·ªán ƒë·∫°i h√≥a quy tr√¨nh x·ª≠ l√Ω tr√°t ƒë√≤i h·∫ßu t√≤a v·ªõi AWS v√† CC Tech Digital" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.5-blog5/">
           <b> 3.5. </b> C√°ch VƒÉn ph√≤ng T·ªïng ch∆∞·ªüng l√Ω Qu·∫≠n Contra Costa hi·ªán ƒë·∫°i h√≥a quy tr√¨nh x·ª≠ l√Ω tr√°t ƒë√≤i h·∫ßu t√≤a v·ªõi AWS v√† CC Tech Digital
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.6-blog6/" title="H·ª£p l√Ω h√≥a s·ª± h·ª£p t√°c gi·ªØa c√°c S·ªü Giao th√¥ng V·∫≠n t·∫£i v·ªõi Private Blockchain" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.6-blog6/">
           <b> 3.6. </b> H·ª£p l√Ω h√≥a s·ª± h·ª£p t√°c gi·ªØa c√°c S·ªü Giao th√¥ng V·∫≠n t·∫£i v·ªõi Private Blockchain
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.7-blog7/" title="Introducing the AWS Infrastructure as Code MCP Server: AI-Powered CDK and CloudFormation Assistance" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.7-blog7/">
           <b> 3.7. </b> Introducing the AWS Infrastructure as Code MCP Server: AI-Powered CDK and CloudFormation Assistance
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.8-blog8/" title="AWS Clean Rooms launches privacy-enhancing synthetic dataset generation for ML model training" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.8-blog8/">
           <b> 3.8. </b> AWS Clean Rooms launches privacy-enhancing synthetic dataset generation for ML model training
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.9-blog9/" title="AWS Partner Central now available in AWS Management Console" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.9-blog9/">
           <b> 3.9. </b> AWS Partner Central now available in AWS Management Console
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.10-blog10/" title="Announcing AWS Partner Central in the AWS Management Console" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.10-blog10/">
           <b> 3.10. </b> Announcing AWS Partner Central in the AWS Management Console
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.11-blog11/" title="Announcing Amazon EKS Capabilities for workload orchestration and cloud resource management" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.11-blog11/">
           <b> 3.11. </b> Announcing Amazon EKS Capabilities for workload orchestration and cloud resource management
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/3-blogstranslated/3.12-blog12/" title="Simplify IAM policy creation with IAM Policy Autopilot, a new open source MCP server for builders" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/3-blogstranslated/3.12-blog12/">
           <b> 3.12. </b> Simplify IAM policy creation with IAM Policy Autopilot, a new open source MCP server for builders
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/4-eventparticipated/" title="Events Participated" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/4-eventparticipated/">
           <b> 4. </b> Events Participated
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/" title="Workshop" class="dd-item 
        parent
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/">
          <b>5. </b>Workshop
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/1-introduction/" title="MLOps Architecture Design" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/1-introduction/">
          <b>1. </b>MLOps Architecture Design
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/2-iam-roles-audit/" title="IAM Roles &amp; Audit For MLops" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/2-iam-roles-audit/">
          <b>2. </b>IAM Roles &amp; Audit For MLops
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/3-s3-data-storage/" title="Data Pipeline Optimization" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/3-s3-data-storage/">
          <b>3. </b>Data Pipeline Optimization
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/4-sagemaker-training/" title="End-to-End Model Training Pipeline" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/4-sagemaker-training/">
          <b>4. </b>End-to-End Model Training Pipeline
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/5-vpc/" title="Production Networking" class="dd-item 
        
        active
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/5-vpc/">
          <b>5. </b>Production Networking
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/6-ecr-registry/" title="Amazon ECR Container Registry (MLOps)" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/6-ecr-registry/">
          <b>6. </b>Amazon ECR Container Registry (MLOps)
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/7-eks-cluster/" title="EKS Cluster Setup (Production)" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/7-eks-cluster/">
          <b>7. </b>EKS Cluster Setup (Production)
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/8-deploy-kubernetes/" title="API Deployment on EKS" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/8-deploy-kubernetes/">
          <b>8. </b>API Deployment on EKS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/9-elastic-load-balancing/" title="Load Balancing" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/9-elastic-load-balancing/">
          <b>9. </b>Load Balancing
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/10-cloudwatch/" title="CloudWatch Monitoring" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/10-cloudwatch/">
          <b>10. </b>CloudWatch Monitoring
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/11-cicd-jenkins-travis/" title="CI/CD Pipeline" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/11-cicd-jenkins-travis/">
          <b>11. </b>CI/CD Pipeline
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/5-workshop/12-cost--teardown/" title="Cost Management &amp; Teardown" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/5-workshop/12-cost--teardown/">
          <b>12. </b>Cost Management &amp; Teardown
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/6-self-evaluation/" title="Self-Assessment" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/6-self-evaluation/">
           <b> 6. </b> Self-Assessment
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws-mlops-retail-prediction/7-feedback/" title="Sharing and Feedback" class="dd-item 
        
        
        
        ">
      <a href="/aws-mlops-retail-prediction/7-feedback/">
           <b> 7. </b> Sharing and Feedback
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="workshop-stats" style="padding: 8px; margin-top: 15px;">
      <div style="background-color: var(--MENU-SECTIONS-BG-color); padding: 8px; border-radius: 6px; margin-bottom: 8px;">
        
        <div style="text-align: center; margin-bottom: 8px;">
          <b style="color: #fd9827; font-size: 12px;">üìä Workshop Stats</b> <br>
          <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Workshop Views" Alt="workshop counter" border="0" style="margin: 2px 0;" />
        </div>
        
        
        <div style="text-align: center; margin-bottom: 8px;">
          <b style="color: #4881cd; font-size: 12px;"><a href="https://cloudjourney.awsstudygroup.com/" style="color: #4881cd; text-decoration: none;">üå•Ô∏è Cloud Journey</a></b> <br>
          <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Cloud Journey Views" Alt="cloud journey counter" border="0" style="margin: 2px 0;" />
        </div>

        
        <div style="text-align: center; border-top: 1px solid var(--MENU-SECTION-HR-color); padding-top: 12px; margin-top: 12px;">
          
          <div style="margin-bottom: 8px;">
            <div style="color: #fd9827; font-weight: bold; font-size: 13px; margin-bottom: 3px;">üìÖ Last Updated</div>
            <div style="color: #ffa500; font-style: italic; font-size: 13px;">28-09-2025</div>
          </div>
          
          
          <div>
            <div style="color: #fd9827; font-weight: bold; font-size: 13px; margin-bottom: 5px;">Team</div>
            <div style="line-height: 1.2;">
              <div style="margin-bottom: 2px;">
                <a href="https://www.linkedin.com/in/nguyen-nhan-732a66247" style="color: #4881cd; text-decoration: none; font-size: 13px;">Nguy·ªÖn Thanh Nh√¢n</a>
              </div>
              <div>
                <span style="color: #4881cd; font-size: 13px;">H√† Kh·∫£ Nguy√™n</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="https://nguyenhk64.github.io/aws-mlops-retail-prediction/5-workshop/5-vpc/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="https://nguyenhk64.github.io/aws-mlops-retail-prediction/vi/5-workshop/5-vpc/">Ti·∫øng Vi·ªát</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      
<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>


 
        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/uit-ntn/aws-mlops-retail-forecast/edit/main/content/5-Workshop/5-vpc/_index.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/aws-mlops-retail-prediction/'>Internship Report</a> > <a href='/aws-mlops-retail-prediction/5-workshop/'>Workshop</a> > Production Networking
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#-task-5-objectives">üéØ Task 5 Objectives</a></li>
    <li><a href="#1-hybrid-vpc-infrastructure-setup">1. Hybrid VPC Infrastructure Setup</a>
      <ul>
        <li><a href="#11-create-vpc">1.1. Create VPC</a></li>
        <li><a href="#12-create-subnets">1.2. Create Subnets</a></li>
        <li><a href="#13-internet-gateway-for-public-alb">1.3 Internet Gateway (for public ALB)</a></li>
        <li><a href="#14-route-tables-configuration">1.4. Route Tables Configuration</a></li>
        <li><a href="#15-enable-auto-assign-public-ipv4-for-public-subnets">1.5 Enable ‚ÄúAuto-assign public IPv4‚Äù for Public Subnets</a></li>
      </ul>
    </li>
    <li><a href="#2-security-groups-layered-model">2) Security Groups (Layered Model)</a>
      <ul>
        <li><a href="#21-alb-security-group-internet--alb">2.1 ALB Security Group (Internet ‚Üí ALB)</a></li>
        <li><a href="#22-eks-nodes-sg-alb--nodespods">2.2 EKS Nodes SG (ALB ‚Üí Nodes/Pods)</a></li>
        <li><a href="#23-eks-control-plane-sg">2.3 EKS Control Plane SG</a></li>
        <li><a href="#24-vpc-endpoints-sg">2.4 VPC Endpoints SG</a></li>
        <li><a href="#16-enable-auto-assign-public-ip-for-alb-subnets">1.6. Enable Auto-assign Public IP for ALB Subnets</a></li>
        <li><a href="#17-console-setup-complete">1.7. Console Setup Complete</a></li>
      </ul>
    </li>
    <li><a href="#2-vpc-endpoints-for-high-performance-internal-networking">2. VPC Endpoints for High-Performance Internal Networking</a>
      <ul>
        <li><a href="#21-s3-gateway-endpoint-free---modeldata-access">2.1. S3 Gateway Endpoint (FREE - Model/Data Access)</a></li>
        <li><a href="#23-ecr-dkr-interface-endpoint-docker-registry">2.3. ECR DKR Interface Endpoint (Docker Registry)</a></li>
        <li><a href="#24-cloudwatch-logs-interface-endpoint">2.4. CloudWatch Logs Interface Endpoint</a></li>
        <li><a href="#25-vpc-endpoints-verification">2.5. VPC Endpoints Verification</a></li>
      </ul>
    </li>
    <li><a href="#3-application-load-balancer-setup">3. Application Load Balancer Setup</a>
      <ul>
        <li><a href="#31-create-application-load-balancer">3.1. Create Application Load Balancer</a></li>
      </ul>
    </li>
    <li><a href="#6-cli-verification-cloudshell-friendly">6) CLI Verification (CloudShell-friendly)</a>
      <ul>
        <li><a href="#61-verify-vpc-and-subnets">6.1 Verify VPC and Subnets</a></li>
        <li><a href="#42-network-performance-testing">4.2. Network Performance Testing</a></li>
        <li><a href="#43-cost-monitoring-setup">4.3. Cost Monitoring Setup</a></li>
      </ul>
    </li>
    <li><a href="#5-terraform-outputs">5. Terraform Outputs</a>
      <ul>
        <li><a href="#51-data-sources-reference-console-created-resources">5.1. Data Sources (Reference Console-created Resources)</a></li>
        <li><a href="#52-outputs-for-eksalb-integration">5.2. Outputs for EKS/ALB Integration</a></li>
        <li><a href="#53-deploy-terraform-outputs">5.3. Deploy Terraform Outputs</a></li>
      </ul>
    </li>
    <li><a href="#6-verification--performance-testing">6. Verification &amp; Performance Testing</a>
      <ul>
        <li><a href="#61-network-architecture-verification">6.1. Network Architecture Verification</a></li>
        <li><a href="#62-verify-route-tables">6.2 Verify Route Tables</a></li>
        <li><a href="#63-verify-endpoints">6.3 Verify Endpoints</a></li>
        <li><a href="#72-alb-issues">7.2. ALB Issues</a></li>
        <li><a href="#73-performance-issues">7.3. Performance Issues</a></li>
      </ul>
    </li>
    <li><a href="#-task-5-results">üëâ Task 5 Results</a>
      <ul>
        <li><a href="#architecture-delivered">Architecture Delivered</a></li>
      </ul>
    </li>
    <li><a href="#8-clean-up-resources-aws-cli">8. Clean Up Resources (AWS CLI)</a>
      <ul>
        <li><a href="#81-delete-application-load-balancer-and-target-groups">8.1. Delete Application Load Balancer and Target Groups</a></li>
        <li><a href="#82-delete-vpc-endpoints">8.2. Delete VPC Endpoints</a></li>
        <li><a href="#83-delete-security-groups">8.3. Delete Security Groups</a></li>
        <li><a href="#84-delete-subnets-and-route-tables">8.4. Delete Subnets and Route Tables</a></li>
        <li><a href="#85-delete-internet-gateway-and-vpc">8.5. Delete Internet Gateway and VPC</a></li>
        <li><a href="#86-clean-up-helper-script">8.6. Clean Up Helper Script</a></li>
      </ul>
    </li>
    <li><a href="#9-vpc-and-networking-pricing-table-ap-southeast-1">9. VPC and Networking Pricing Table (ap-southeast-1)</a>
      <ul>
        <li><a href="#91-vpc-core-components-cost">9.1. VPC Core Components Cost</a></li>
        <li><a href="#92-vpc-endpoints-cost">9.2. VPC Endpoints Cost</a></li>
        <li><a href="#93-application-load-balancer-cost">9.3. Application Load Balancer Cost</a></li>
        <li><a href="#94-nat-gateway-cost-not-used-in-task-5">9.4. NAT Gateway Cost (Not used in Task 5)</a></li>
        <li><a href="#95-data-transfer-pricing">9.5. Data Transfer Pricing</a></li>
        <li><a href="#96-estimated-total-cost-for-task-5">9.6. Estimated Total Cost for Task 5</a></li>
        <li><a href="#97-cost-comparison-with-traditional-setup">9.7. Cost Comparison with Traditional Setup</a></li>
        <li><a href="#98-cost-optimization-tips">9.8. Cost Optimization Tips</a></li>
      </ul>
    </li>
    <li><a href="#-task-5-implementation-video">üìπ Task 5 Implementation Video</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Production Networking
            </h1>
          

        



	<h2 id="-task-5-objectives">üéØ Task 5 Objectives</h2>
<p>Set up <strong>Production VPC</strong> for EKS deployment and public API demo (separate from SageMaker training VPC):</p>
<ol>
<li><strong>Production EKS Infrastructure</strong> - EKS Cluster and Pods in private subnets</li>
<li><strong>Public API Access</strong> - ALB in public subnets for demo endpoint <code>/predict</code></li>
<li><strong>High-Performance Internal Networking</strong> - VPC Endpoints for S3/ECR access &lt; 50ms latency</li>
<li><strong>Cost Optimization</strong> - Remove NAT Gateway, only enable ALB when demo</li>
</ol>

<div class="notices warning" ><p><strong>VPC Separation Strategy</strong></p>
<ul>
<li><strong>Task 4</strong>: SageMaker training uses default VPC (Quick setup) - simple, cost-effective</li>
<li><strong>Task 5</strong>: EKS production uses separate VPC - better security, control</li>
<li><strong>No conflict</strong>: 2 independent VPCs, can connect via VPC Peering if needed</li>
</ul>
</div>

<div class="notices info">
**üéØ Production VPC Architecture:**
<ul>
<li>‚úÖ <strong>Private Subnets</strong>: EKS Pods (secure, no direct Internet)</li>
<li>‚úÖ <strong>Public Subnets</strong>: ALB only (public API demo access)</li>
<li>‚úÖ <strong>Internal Communication</strong>: EKS ‚Üî S3 via VPC Endpoints</li>
<li>‚úÖ <strong>Demo Ready</strong>: Public API endpoint via ALB with SSL/health checks</li>
</ul>
</div>
<p>üì• <strong>Input</strong></p>
<ul>
<li>AWS Account with VPC permissions</li>
<li>CIDR planning: <code>10.0.0.0/16</code> (production EKS VPC)</li>
<li>Demo requirements: Public API access via ALB</li>
<li>Task 4 completed: SageMaker training running in default VPC</li>
<li><strong>Input from Task 4:</strong> Task 4 (SageMaker training) ‚Äî training VPC choices and requirements</li>
<li><strong>Input from Task 2:</strong> Task 2 (IAM Roles &amp; Audit) ‚Äî roles and policies required for VPC, EKS and ECR access</li>
</ul>
<h2 id="1-hybrid-vpc-infrastructure-setup">1. Hybrid VPC Infrastructure Setup</h2>
<h3 id="11-create-vpc">1.1. Create VPC</h3>
<ol>
<li><strong>Access VPC Dashboard:</strong>
<ul>
<li>AWS Console ‚Üí VPC service ‚Üí &ldquo;Create VPC&rdquo;</li>
</ul>
</li>
</ol>
<p><img src="../images/05-vpc-networking/01-create-vpc-console.png" alt="Create VPC Console"></p>
<ol start="2">
<li><strong>VPC Configuration:</strong>
<pre tabindex="0"><code>VPC Name: mlops-retail-forecast-hybrid-vpc
IPv4 CIDR: 10.0.0.0/16
IPv6 CIDR: No IPv6 CIDR block
Tenancy: Default
Enable DNS hostnames: ‚úÖ (Required for VPC Endpoints)
Enable DNS resolution: ‚úÖ (Required for VPC Endpoints)
</code></pre></li>
</ol>
<hr>
<h3 id="12-create-subnets">1.2. Create Subnets</h3>
<p>VPC ‚Üí <strong>Subnets</strong> ‚Üí <strong>Create subnet</strong></p>
<h4 id="public-subnets-alb-only">Public Subnets (ALB only)</h4>
<p><strong>Public Subnet 1 (ap-southeast-1a)</strong></p>
<pre tabindex="0"><code>Name: mlops-hybrid-public-alb-ap-southeast-1a
AZ: ap-southeast-1a
CIDR: 10.0.1.0/24
</code></pre><p><strong>Public Subnet 2 (ap-southeast-1b)</strong></p>
<pre tabindex="0"><code>Name: mlops-hybrid-public-alb-ap-southeast-1b
AZ: ap-southeast-1b
CIDR: 10.0.2.0/24
</code></pre><h4 id="private-subnets-eks-workloads">Private Subnets (EKS workloads)</h4>
<p><strong>Private Subnet 1 (ap-southeast-1a)</strong></p>
<pre tabindex="0"><code>Name: mlops-eks-private-workloads-ap-southeast-1a
AZ: ap-southeast-1a
CIDR: 10.0.101.0/24
</code></pre><p><strong>Private Subnet 2 (ap-southeast-1b)</strong></p>
<pre tabindex="0"><code>Name: mlops-eks-private-workloads-ap-southeast-1b
AZ: ap-southeast-1b
CIDR: 10.0.102.0/24
</code></pre><hr>
<h3 id="13-internet-gateway-for-public-alb">1.3 Internet Gateway (for public ALB)</h3>
<ol>
<li><strong>Create Internet Gateway:</strong>
<ul>
<li>&ldquo;Internet Gateways&rdquo; ‚Üí &ldquo;Create internet gateway&rdquo;</li>
</ul>
<pre tabindex="0"><code>Name: mlops-hybrid-igw
Purpose: Public access for ALB demo endpoint
</code></pre></li>
</ol>
<p><img src="../images/05-vpc-networking/04.1-internet-gateway.png" alt="Internet Gateway Setup"></p>
<ol start="2">
<li><strong>Attach to VPC:</strong>
<ul>
<li>Select Internet Gateway ‚Üí &ldquo;Actions&rdquo; ‚Üí &ldquo;Attach to VPC&rdquo;</li>
<li>Select: mlops-retail-forecast-hybrid-vpc</li>
</ul>
</li>
</ol>
<p><img src="../images/05-vpc-networking/04.2-internet-gateway.png" alt="Attach IGW to VPC"></p>
<h3 id="14-route-tables-configuration">1.4. Route Tables Configuration</h3>
<h4 id="141-public-route-table-alb-traffic">1.4.1. Public Route Table (ALB Traffic)</h4>
<p>Create route table:</p>
<pre tabindex="0"><code>Name: mlops-hybrid-public-alb-rt
VPC: mlops-retail-forecast-hybrid-vpc
</code></pre><p>Add route:</p>
<pre tabindex="0"><code>0.0.0.0/0  ‚Üí  mlops-hybrid-igw
</code></pre><p>Associate <strong>both public subnets</strong> to this route table.</p>
<h4 id="private-route-table-workload-subnets">Private Route Table (workload subnets)</h4>
<p>Create route table:</p>
<pre tabindex="0"><code>Name: mlops-hybrid-private-workloads-rt
VPC: mlops-retail-forecast-hybrid-vpc
</code></pre><p>Keep only:</p>
<pre tabindex="0"><code>10.0.0.0/16 ‚Üí local
</code></pre><p><strong>Do NOT add</strong> <code>0.0.0.0/0</code> (no NAT, no IGW).</p>
<p>Associate <strong>both private subnets</strong> to this route table.</p>
<hr>
<h3 id="15-enable-auto-assign-public-ipv4-for-public-subnets">1.5 Enable ‚ÄúAuto-assign public IPv4‚Äù for Public Subnets</h3>
<p>VPC ‚Üí Subnets ‚Üí select each <strong>public</strong> subnet ‚Üí Actions ‚Üí <strong>Modify auto-assign IP settings</strong></p>
<ul>
<li>‚úÖ Enable auto-assign public IPv4 address</li>
</ul>

<div class="notices warning" ><p>If this is OFF, your Internet-facing ALB may fail or behave incorrectly.</p>
</div>

<hr>
<h2 id="2-security-groups-layered-model">2) Security Groups (Layered Model)</h2>
<h3 id="21-alb-security-group-internet--alb">2.1 ALB Security Group (Internet ‚Üí ALB)</h3>
<pre tabindex="0"><code>Name: mlops-hybrid-alb-sg
VPC: mlops-retail-forecast-hybrid-vpc
</code></pre><p>Inbound:</p>
<ul>
<li>TCP 80 from <code>0.0.0.0/0</code> (optional; redirect to 443)</li>
<li>TCP 443 from <code>0.0.0.0/0</code> (recommended)</li>
</ul>
<p>Outbound:</p>
<ul>
<li>TCP 80 ‚Üí <strong>EKS Nodes SG</strong> (or all traffic to EKS Nodes SG for simplicity in demo)</li>
</ul>
<hr>
<h3 id="22-eks-nodes-sg-alb--nodespods">2.2 EKS Nodes SG (ALB ‚Üí Nodes/Pods)</h3>
<pre tabindex="0"><code>Name: mlops-hybrid-eks-nodes-sg
VPC: mlops-retail-forecast-hybrid-vpc
</code></pre><p>Inbound:</p>
<ul>
<li>TCP 80 from <strong>ALB SG</strong> (API traffic)</li>
<li>TCP 443 from <strong>ALB SG</strong> (if you terminate TLS at pod/service)</li>
<li>All traffic from <strong>self</strong> (node-to-node)</li>
<li>All traffic from <strong>EKS Control Plane SG</strong> (cluster management)</li>
</ul>
<p>Outbound:</p>
<ul>
<li>TCP 443 to <strong>VPC Endpoints SG</strong> (AWS services over PrivateLink)</li>
<li>All traffic to <strong>self</strong></li>
</ul>
<hr>
<h3 id="23-eks-control-plane-sg">2.3 EKS Control Plane SG</h3>
<pre tabindex="0"><code>Name: mlops-hybrid-eks-control-plane-sg
VPC: mlops-retail-forecast-hybrid-vpc
</code></pre><p>Inbound:</p>
<ul>
<li>TCP 443 from <strong>EKS Nodes SG</strong></li>
</ul>
<p>Outbound:</p>
<ul>
<li>All traffic to <strong>EKS Nodes SG</strong></li>
</ul>
<hr>
<h3 id="24-vpc-endpoints-sg">2.4 VPC Endpoints SG</h3>
<pre tabindex="0"><code>Name: mlops-hybrid-vpc-endpoints-sg
VPC: mlops-retail-forecast-hybrid-vpc
</code></pre><p>Inbound:</p>
<p><img src="../images/05-vpc-networking/09.9-vpc-endpoints-inbound.png" alt="VPC Endpoints Inbound Rules"></p>

<div class="notices success" ><p><strong>üéØ Security Groups Complete!</strong></p>
<p><strong>4 Security Groups Created:</strong></p>
<ul>
<li>ALB SG: Public Internet access (80/443)</li>
<li>EKS Nodes SG: Private workloads</li>
<li>EKS Control Plane SG: Cluster management</li>
<li>VPC Endpoints SG: AWS services access</li>
</ul>
<p><strong>Note:</strong> SageMaker will use default SG in default VPC (Task 4)</p>
</div>

<h3 id="16-enable-auto-assign-public-ip-for-alb-subnets">1.6. Enable Auto-assign Public IP for ALB Subnets</h3>
<p><strong>Important for ALB functionality:</strong></p>
<ol>
<li>
<p><strong>Navigate to Public Subnets:</strong></p>
<ul>
<li>VPC Dashboard ‚Üí Subnets</li>
</ul>
</li>
<li>
<p><strong>Enable Auto-assign Public IP:</strong></p>
<ul>
<li>Select each public subnet</li>
<li>Actions ‚Üí &ldquo;Modify auto-assign IP settings&rdquo;</li>
<li>‚úÖ Enable auto-assign public IPv4 address</li>
</ul>
</li>
</ol>
<p><img src="../images/05-vpc-networking/06-auto-assign-public-ip.png" alt="Auto-assign Public IP"></p>

<div class="notices warning" ><p><strong>‚ö†Ô∏è Critical for ALB:</strong> Public subnets must have auto-assign public IP enabled, otherwise ALB creation will fail.</p>
</div>

<h3 id="17-console-setup-complete">1.7. Console Setup Complete</h3>
<p><img src="../images/05-vpc-networking/10-security-groups-overview.png" alt="Security Groups Overview">
<img src="../images/05-vpc-networking/11-vpc-resource-map.png" alt="VPC Resource Map"></p>

<div class="notices success" ><p><strong>üéØ Hybrid VPC Console Setup Complete!</strong></p>
<p><strong>Security Architecture:</strong></p>
<ul>
<li><strong>Layer 1</strong>: Internet ‚Üí ALB (80/443 from 0.0.0.0/0)</li>
<li><strong>Layer 2</strong>: ALB ‚Üí EKS Nodes (controlled access)</li>
<li><strong>Layer 3</strong>: EKS ‚Üí VPC Endpoints (AWS services only)</li>
<li><strong>Layer 4</strong>: Private subnets completely isolated from Internet</li>
</ul>
<p><strong>Demo Ready:</strong> ALB can accept public traffic and route to private EKS API pods</p>
</div>

<h2 id="2-vpc-endpoints-for-high-performance-internal-networking">2. VPC Endpoints for High-Performance Internal Networking</h2>
<p><strong>This step is MANDATORY to ensure EKS ‚Üî S3 ‚Üî SageMaker latency &lt; 50ms:</strong></p>
<h3 id="21-s3-gateway-endpoint-free---modeldata-access">2.1. S3 Gateway Endpoint (FREE - Model/Data Access)</h3>
<ol>
<li><strong>Create S3 Gateway Endpoint:</strong>
<ul>
<li>VPC Dashboard ‚Üí &ldquo;Endpoints&rdquo; ‚Üí &ldquo;Create endpoint&rdquo;</li>
</ul>
<pre tabindex="0"><code>Endpoint name: mlops-hybrid-s3-gateway-endpoint
Service: com.amazonaws.ap-southeast-1.s3
Type: Gateway
VPC: mlops-retail-forecast-hybrid-vpc
Route Tables: mlops-hybrid-private-workloads-rt
Policy: Full Access (demo purposes)
</code></pre></li>
</ol>
<hr>
<p><strong>Purpose:</strong> EKS Pods load model artifacts from S3 &lt; 50ms latency</p>
<p>Create these as <strong>Interface</strong> endpoints:</p>
<h4 id="ecr-api">ECR API</h4>
<pre tabindex="0"><code>Name: mlops-hybrid-ecr-api-endpoint
Service: com.amazonaws.ap-southeast-1.ecr.api
Type: Interface
Subnets: both private subnets
Security group: mlops-hybrid-vpc-endpoints-sg
Private DNS: ‚úÖ Enabled
</code></pre><h4 id="ecr-dkr">ECR DKR</h4>
<p><strong>Purpose:</strong> EKS pull container images from ECR repository</p>
<h3 id="23-ecr-dkr-interface-endpoint-docker-registry">2.3. ECR DKR Interface Endpoint (Docker Registry)</h3>
<ol>
<li><strong>Create ECR DKR Endpoint:</strong>
<pre tabindex="0"><code>Endpoint name: mlops-hybrid-ecr-dkr-endpoint
Service: com.amazonaws.ap-southeast-1.ecr.dkr
Type: Interface
VPC: mlops-retail-forecast-hybrid-vpc
Subnets: Both private workload subnets
Security Groups: mlops-hybrid-vpc-endpoints-sg
Private DNS: ‚úÖ Enabled
</code></pre></li>
</ol>
<h4 id="cloudwatch-logs">CloudWatch Logs</h4>
<p><strong>Purpose:</strong> Docker layer downloads for EKS container runtime</p>
<h3 id="24-cloudwatch-logs-interface-endpoint">2.4. CloudWatch Logs Interface Endpoint</h3>
<ol>
<li><strong>Create CloudWatch Logs Endpoint:</strong>
<pre tabindex="0"><code>Endpoint name: mlops-hybrid-logs-endpoint
Service: com.amazonaws.ap-southeast-1.logs
Type: Interface
VPC: mlops-retail-forecast-hybrid-vpc
Subnets: Both private workload subnets
Security Groups: mlops-hybrid-vpc-endpoints-sg
Private DNS: ‚úÖ Enabled
</code></pre></li>
</ol>
<p><img src="../images/05-vpc-networking/10.7-logs-endpoint.png" alt="CloudWatch Logs Endpoint">
<img src="../images/05-vpc-networking/10.7-logs-endpoint2.png" alt="CloudWatch Logs Endpoint"></p>
<p><strong>Purpose:</strong> Monitoring and logging for EKS/SageMaker workloads</p>
<h3 id="25-vpc-endpoints-verification">2.5. VPC Endpoints Verification</h3>
<p><img src="../images/05-vpc-networking/10.8-vpc-endpoints-overview.png" alt="VPC Endpoints Overview"></p>
<p><strong>Expected Results:</strong></p>
<ul>
<li><strong>S3 Gateway</strong>: Route added to private route table automatically</li>
<li><strong>3x Interface Endpoints</strong>: ENI created in each private subnet</li>
<li><strong>Private DNS</strong>: All endpoints resolvable via internal DNS</li>
</ul>
<p><strong>üéØ VPC Endpoints Complete!</strong></p>
<p><strong>High-Performance Internal Network:</strong></p>
<ul>
<li>EKS ‚Üî S3: &lt; 50ms (Gateway Endpoint)</li>
<li>EKS ‚Üî ECR: &lt; 50ms (Interface Endpoints)</li>
<li>EKS ‚Üî CloudWatch: &lt; 50ms (Logs Endpoint)</li>
<li>No Internet dependency for AWS services</li>
</ul>
<p><strong>Cost Optimized:</strong> ~$7.2/month savings (no need for SageMaker VPC Endpoint)</p>
<h2 id="3-application-load-balancer-setup">3. Application Load Balancer Setup</h2>
<h3 id="31-create-application-load-balancer">3.1. Create Application Load Balancer</h3>
<ol>
<li>
<p><strong>Navigate to Load Balancers:</strong></p>
<ul>
<li>EC2 Dashboard ‚Üí Load Balancers ‚Üí &ldquo;Create load balancer&rdquo;</li>
</ul>
</li>
<li>
<p><strong>ALB Configuration:</strong></p>
<pre tabindex="0"><code>Name: mlops-hybrid-api-demo-alb
Scheme: Internet-facing
IP address type: IPv4
VPC: mlops-retail-forecast-hybrid-vpc
Mappings: Both public ALB subnets
Security groups: mlops-hybrid-alb-sg
</code></pre></li>
</ol>
<h4 id="52-create-target-group-for-eks-later">5.2 Create Target Group (for EKS later)</h4>
<p>EC2 ‚Üí Target Groups ‚Üí <strong>Create</strong></p>
<pre tabindex="0"><code>Target type: IP addresses
Name: mlops-hybrid-eks-api-tg
Protocol: HTTP
Port: 80
VPC: mlops-retail-forecast-hybrid-vpc
Health check path: /health
Success codes: 200
</code></pre><h4 id="53-listener">5.3 Listener</h4>
<ul>
<li>HTTP 80 ‚Üí (optional) redirect to HTTPS 443</li>
<li>HTTPS 443 ‚Üí forward to target group (needs ACM cert if real TLS)</li>
</ul>

<div class="notices info" ><p><strong>üí° SSL Certificate Options:</strong></p>
<ul>
<li><strong>Production</strong>: Use AWS Certificate Manager (ACM) with domain</li>
<li><strong>Demo</strong>: Create self-signed certificate or use HTTP only</li>
<li><strong>Development</strong>: Skip SSL, use HTTP listener only</li>
</ul>
</div>

<hr>
<h2 id="6-cli-verification-cloudshell-friendly">6) CLI Verification (CloudShell-friendly)</h2>
<h3 id="61-verify-vpc-and-subnets">6.1 Verify VPC and Subnets</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Enable VPC Flow Logs for security monitoring</span>
</span></span><span style="display:flex;"><span>aws ec2 create-flow-logs <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --resource-type VPC <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --resource-ids vpc-xxxxxxxxx <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --traffic-type ALL <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --log-destination-type cloud-watch-logs <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --log-group-name VPCFlowLogs <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --deliver-logs-permission-arn arn:aws:iam::ACCOUNT:role/flowlogsRole
</span></span></code></pre></div><h3 id="42-network-performance-testing">4.2. Network Performance Testing</h3>
<p><strong>Test EKS ‚Üî S3 Latency:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># From EKS Pod (after cluster setup)</span>
</span></span><span style="display:flex;"><span>kubectl run test-pod --image<span style="color:#f92672">=</span>amazonlinux --restart<span style="color:#f92672">=</span>Never -- sleep <span style="color:#ae81ff">3600</span>
</span></span><span style="display:flex;"><span>kubectl exec -it test-pod -- bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Inside pod</span>
</span></span><span style="display:flex;"><span>yum install -y awscli
</span></span><span style="display:flex;"><span>time aws s3 ls s3://your-model-bucket/
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Expected: &lt; 50ms for VPC Endpoint</span>
</span></span></code></pre></div><p><strong>Test ALB ‚Üî EKS Connectivity:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Test from outside VPC</span>
</span></span><span style="display:flex;"><span>curl -I http://your-alb-dns-name/health
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Expected: HTTP 200 OK when EKS API is running</span>
</span></span></code></pre></div><h3 id="43-cost-monitoring-setup">4.3. Cost Monitoring Setup</h3>
<p><strong>CloudWatch Cost Alarms:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Create cost alarm for VPC Endpoints</span>
</span></span><span style="display:flex;"><span>aws cloudwatch put-metric-alarm <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --alarm-name <span style="color:#e6db74">&#34;VPC-Endpoints-Cost-Alert&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --alarm-description <span style="color:#e6db74">&#34;Alert when VPC Endpoints cost &gt; </span>$30<span style="color:#e6db74">/month&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --metric-name EstimatedCharges <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --namespace AWS/Billing <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --statistic Maximum <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --period <span style="color:#ae81ff">86400</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --threshold <span style="color:#ae81ff">30</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --comparison-operator GreaterThanThreshold <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --dimensions Name<span style="color:#f92672">=</span>Currency,Value<span style="color:#f92672">=</span>USD Name<span style="color:#f92672">=</span>ServiceName,Value<span style="color:#f92672">=</span>AmazonVPC
</span></span></code></pre></div><h2 id="5-terraform-outputs">5. Terraform Outputs</h2>

<div class="notices info" ><p><strong>üí° When to use Terraform outputs:</strong></p>
<ul>
<li>‚úÖ Task 7-10 will use Terraform (EKS cluster, ALB controller)</li>
<li>‚úÖ Need automated deployment across environments</li>
<li>‚úÖ Want to reference infrastructure programmatically</li>
</ul>
<p><strong>If Task 7-10 use Console:</strong> Skip this section completely!</p>
</div>

<h3 id="51-data-sources-reference-console-created-resources">5.1. Data Sources (Reference Console-created Resources)</h3>
<p><strong>File: <code>aws/infra/vpc-data-sources.tf</code></strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hcl" data-lang="hcl"><span style="display:flex;"><span><span style="color:#75715e"># Reference VPC infrastructure from Console
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_vpc&#34; &#34;hybrid&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">filter</span> {
</span></span><span style="display:flex;"><span>    name   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tag:Name&#34;</span>
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;mlops-retail-forecast-hybrid-vpc&#34;</span>]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}<span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># Public subnets (ALB)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_subnets&#34; &#34;public_alb&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">filter</span> {
</span></span><span style="display:flex;"><span>    name   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;vpc-id&#34;</span>
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> [<span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_vpc</span>.<span style="color:#66d9ef">hybrid</span>.<span style="color:#66d9ef">id</span>]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">filter</span> {
</span></span><span style="display:flex;"><span>    name   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tag:Name&#34;</span>
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;*public-alb*&#34;</span>]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}<span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># Private subnets (EKS + SageMaker)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_subnets&#34; &#34;private_workloads&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">filter</span> {
</span></span><span style="display:flex;"><span>    name   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;vpc-id&#34;</span>
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> [<span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_vpc</span>.<span style="color:#66d9ef">hybrid</span>.<span style="color:#66d9ef">id</span>]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">filter</span> {
</span></span><span style="display:flex;"><span>    name   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tag:Name&#34;</span>
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;*private-workloads*&#34;</span>]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}<span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># Security Groups
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_security_group&#34; &#34;alb&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">filter</span> {
</span></span><span style="display:flex;"><span>    name   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tag:Name&#34;</span>
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;mlops-hybrid-alb-sg&#34;</span>]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_security_group&#34; &#34;eks_nodes&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">filter</span> {
</span></span><span style="display:flex;"><span>    name   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tag:Name&#34;</span>
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;mlops-hybrid-eks-nodes-sg&#34;</span>]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_security_group&#34; &#34;eks_control_plane&#34;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">filter</span> {
</span></span><span style="display:flex;"><span>    name   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tag:Name&#34;</span>
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;mlops-hybrid-eks-control-plane-sg&#34;</span>]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}<span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># ALB
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_lb&#34; &#34;api_demo&#34;</span> {
</span></span><span style="display:flex;"><span>  name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mlops-hybrid-api-demo-alb&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_lb_target_group&#34; &#34;eks_api&#34;</span> {
</span></span><span style="display:flex;"><span>  name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mlops-hybrid-eks-api-tg&#34;</span>
</span></span><span style="display:flex;"><span>}<span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># VPC Endpoints
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_vpc_endpoint&#34; &#34;s3&#34;</span> {
</span></span><span style="display:flex;"><span>  vpc_id       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_vpc</span>.<span style="color:#66d9ef">hybrid</span>.<span style="color:#66d9ef">id</span>
</span></span><span style="display:flex;"><span>  service_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;com.amazonaws.ap-southeast-1.s3&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_vpc_endpoint&#34; &#34;ecr_api&#34;</span> {
</span></span><span style="display:flex;"><span>  vpc_id       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_vpc</span>.<span style="color:#66d9ef">hybrid</span>.<span style="color:#66d9ef">id</span>
</span></span><span style="display:flex;"><span>  service_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;com.amazonaws.ap-southeast-1.ecr.api&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_vpc_endpoint&#34; &#34;ecr_dkr&#34;</span> {
</span></span><span style="display:flex;"><span>  vpc_id       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_vpc</span>.<span style="color:#66d9ef">hybrid</span>.<span style="color:#66d9ef">id</span>
</span></span><span style="display:flex;"><span>  service_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;com.amazonaws.ap-southeast-1.ecr.dkr&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">data</span> <span style="color:#e6db74">&#34;aws_vpc_endpoint&#34; &#34;sagemaker_runtime&#34;</span> {
</span></span><span style="display:flex;"><span>  vpc_id       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_vpc</span>.<span style="color:#66d9ef">hybrid</span>.<span style="color:#66d9ef">id</span>
</span></span><span style="display:flex;"><span>  service_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;com.amazonaws.ap-southeast-1.sagemaker.runtime&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="52-outputs-for-eksalb-integration">5.2. Outputs for EKS/ALB Integration</h3>
<p><strong>File: <code>aws/infra/networking-outputs.tf</code></strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hcl" data-lang="hcl"><span style="display:flex;"><span><span style="color:#75715e"># VPC Information
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;vpc_id&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hybrid VPC ID&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_vpc</span>.<span style="color:#66d9ef">hybrid</span>.<span style="color:#66d9ef">id</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;vpc_cidr_block&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;VPC CIDR block&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_vpc</span>.<span style="color:#66d9ef">hybrid</span>.<span style="color:#66d9ef">cidr_block</span>
</span></span><span style="display:flex;"><span>}<span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># Subnet Information
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;public_alb_subnet_ids&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Public subnet IDs for ALB&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_subnets</span>.<span style="color:#66d9ef">public_alb</span>.<span style="color:#66d9ef">ids</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;private_workload_subnet_ids&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Private subnet IDs for EKS and SageMaker&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_subnets</span>.<span style="color:#66d9ef">private_workloads</span>.<span style="color:#66d9ef">ids</span>
</span></span><span style="display:flex;"><span>}<span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># Security Group Information
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;alb_security_group_id&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ALB Security Group ID&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_security_group</span>.<span style="color:#66d9ef">alb</span>.<span style="color:#66d9ef">id</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;eks_nodes_security_group_id&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;EKS Nodes Security Group ID&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_security_group</span>.<span style="color:#66d9ef">eks_nodes</span>.<span style="color:#66d9ef">id</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;eks_control_plane_security_group_id&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;EKS Control Plane Security Group ID&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_security_group</span>.<span style="color:#66d9ef">eks_control_plane</span>.<span style="color:#66d9ef">id</span>
</span></span><span style="display:flex;"><span>}<span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># ALB Information
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;alb_arn&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ALB ARN for API demo&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_lb</span>.<span style="color:#66d9ef">api_demo</span>.<span style="color:#66d9ef">arn</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;alb_dns_name&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ALB DNS name for public API access&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_lb</span>.<span style="color:#66d9ef">api_demo</span>.<span style="color:#66d9ef">dns_name</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;alb_zone_id&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ALB Zone ID for Route53 integration&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_lb</span>.<span style="color:#66d9ef">api_demo</span>.<span style="color:#66d9ef">zone_id</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;eks_api_target_group_arn&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Target group ARN for EKS API pods&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_lb_target_group</span>.<span style="color:#66d9ef">eks_api</span>.<span style="color:#66d9ef">arn</span>
</span></span><span style="display:flex;"><span>}<span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># VPC Endpoints Information
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;s3_vpc_endpoint_id&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;S3 VPC Endpoint ID&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_vpc_endpoint</span>.<span style="color:#66d9ef">s3</span>.<span style="color:#66d9ef">id</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;ecr_api_vpc_endpoint_id&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ECR API VPC Endpoint ID&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_vpc_endpoint</span>.<span style="color:#66d9ef">ecr_api</span>.<span style="color:#66d9ef">id</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;sagemaker_runtime_vpc_endpoint_id&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;SageMaker Runtime VPC Endpoint ID&#34;</span>
</span></span><span style="display:flex;"><span>  value       <span style="color:#f92672">=</span> <span style="color:#66d9ef">data</span>.<span style="color:#66d9ef">aws_vpc_endpoint</span>.<span style="color:#66d9ef">sagemaker_runtime</span>.<span style="color:#66d9ef">id</span>
</span></span><span style="display:flex;"><span>}<span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># Demo Configuration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">output</span> <span style="color:#e6db74">&#34;api_demo_config&#34;</span> {
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Configuration for API demo&#34;</span>
</span></span><span style="display:flex;"><span>  value <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    public_endpoint <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://${data.aws_lb.api_demo.dns_name}&#34;</span>
</span></span><span style="display:flex;"><span>    health_check    <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://${data.aws_lb.api_demo.dns_name}/health&#34;</span>
</span></span><span style="display:flex;"><span>    predict_endpoint <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://${data.aws_lb.api_demo.dns_name}/predict&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="53-deploy-terraform-outputs">5.3. Deploy Terraform Outputs</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Navigate to infrastructure directory</span>
</span></span><span style="display:flex;"><span>cd aws/infra
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Initialize Terraform</span>
</span></span><span style="display:flex;"><span>terraform init
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Plan (should show 0 resources to create, only data sources)</span>
</span></span><span style="display:flex;"><span>terraform plan
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Apply outputs</span>
</span></span><span style="display:flex;"><span>terraform apply -auto-approve
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Verify outputs</span>
</span></span><span style="display:flex;"><span>terraform output api_demo_config
</span></span></code></pre></div><p>Expected output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;health_check&#34;</span> <span style="color:#960050;background-color:#1e0010">=</span> <span style="color:#e6db74">&#34;https://mlops-hybrid-api-demo-alb-123456789.ap-southeast-1.elb.amazonaws.com/health&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;predict_endpoint&#34;</span> <span style="color:#960050;background-color:#1e0010">=</span> <span style="color:#e6db74">&#34;https://mlops-hybrid-api-demo-alb-123456789.ap-southeast-1.elb.amazonaws.com/predict&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;public_endpoint&#34;</span> <span style="color:#960050;background-color:#1e0010">=</span> <span style="color:#e6db74">&#34;https://mlops-hybrid-api-demo-alb-123456789.ap-southeast-1.elb.amazonaws.com&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="6-verification--performance-testing">6. Verification &amp; Performance Testing</h2>
<h3 id="61-network-architecture-verification">6.1. Network Architecture Verification</h3>
<p><strong>Verify Hybrid VPC Setup:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Check VPC configuration</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-vpcs <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --filters <span style="color:#e6db74">&#34;Name=tag:Name,Values=mlops-retail-forecast-hybrid-vpc&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --query <span style="color:#e6db74">&#39;Vpcs[0].{VpcId:VpcId,Cidr:CidrBlock,State:State}&#39;</span> --output table
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>aws ec2 describe-subnets <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --filters <span style="color:#e6db74">&#34;Name=vpc-id,Values=&lt;vpc-id&gt;&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --query <span style="color:#e6db74">&#39;Subnets[*].{SubnetId:SubnetId,AZ:AvailabilityZone,CIDR:CidrBlock,MapPublicIp:MapPublicIpOnLaunch}&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --output table
</span></span></code></pre></div><h3 id="62-verify-route-tables">6.2 Verify Route Tables</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aws ec2 describe-route-tables <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --filters <span style="color:#e6db74">&#34;Name=vpc-id,Values=&lt;vpc-id&gt;&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --query <span style="color:#e6db74">&#39;RouteTables[*].{RT:RouteTableId,Routes:Routes}&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --output json
</span></span></code></pre></div><h3 id="63-verify-endpoints">6.3 Verify Endpoints</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aws ec2 describe-vpc-endpoints <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --filters <span style="color:#e6db74">&#34;Name=vpc-id,Values=</span><span style="color:#66d9ef">$(</span>terraform output -raw vpc_id<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --query <span style="color:#e6db74">&#39;VpcEndpoints[*].{Service:ServiceName,PrivateDnsEnabled:PrivateDnsEnabled}&#39;</span>
</span></span></code></pre></div><h3 id="72-alb-issues">7.2. ALB Issues</h3>
<p><strong>Problem: ALB not accessible from Internet</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Check Internet Gateway attached</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-internet-gateways <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --filters <span style="color:#e6db74">&#34;Name=attachment.vpc-id,Values=</span><span style="color:#66d9ef">$(</span>terraform output -raw vpc_id<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check public subnet route table</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-route-tables <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --filters <span style="color:#e6db74">&#34;Name=tag:Name,Values=mlops-hybrid-public-alb-rt&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --query <span style="color:#e6db74">&#39;RouteTables[0].Routes&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Should have 0.0.0.0/0 ‚Üí Internet Gateway</span>
</span></span></code></pre></div><p><strong>Problem: ALB can&rsquo;t reach EKS targets</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Check security group rules</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-security-groups <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --group-names mlops-hybrid-eks-nodes-sg <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --query <span style="color:#e6db74">&#39;SecurityGroups[0].IpPermissions[?IpProtocol==`tcp` &amp;&amp; FromPort==`80`]&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Should allow port 80 from ALB security group</span>
</span></span></code></pre></div><h3 id="73-performance-issues">7.3. Performance Issues</h3>
<p><strong>Problem: High latency EKS ‚Üî S3</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Verify using VPC endpoint</span>
</span></span><span style="display:flex;"><span>kubectl exec -it network-test -- traceroute s3.ap-southeast-1.amazonaws.com
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Should not go through Internet (no public IPs in trace)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check VPC endpoint policy</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-vpc-endpoints <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --filters <span style="color:#e6db74">&#34;Name=service-name,Values=com.amazonaws.ap-southeast-1.s3&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --query <span style="color:#e6db74">&#39;VpcEndpoints[0].PolicyDocument&#39;</span>
</span></span></code></pre></div><h2 id="-task-5-results">üëâ Task 5 Results</h2>
<p>‚úÖ <strong>Hybrid VPC Architecture</strong> - Public ALB + Private workloads security model<br>
‚úÖ <strong>Public API Demo Ready</strong> - ALB configured for demo endpoint <code>/predict</code><br>
‚úÖ <strong>High-Performance Internal</strong> - VPC Endpoints &lt; 50ms latency EKS ‚Üî S3<br>
‚úÖ <strong>Cost Optimized</strong> - $21.6/month base + $0.02/hour ALB demo usage<br>
‚úÖ <strong>Production Security</strong> - Layered security groups, no Internet access for workloads</p>
<h3 id="architecture-delivered">Architecture Delivered</h3>
<pre tabindex="0"><code>‚úÖ Hybrid VPC Foundation:
   - Public Subnets: ALB demo access (Internet facing)
   - Private Subnets: EKS + SageMaker (secure, no Internet)
   - Multi-AZ: High availability for API demo

‚úÖ Public Demo Capability:
   - ALB: Public endpoint for API demo
   - Target Groups: Ready for EKS API pods
   - SSL/Health checks: Production-ready demo

‚úÖ High-Performance Internal Network:
   - S3 Gateway Endpoint: FREE, &lt; 50ms model access
   - ECR Interface Endpoints: Fast container pulls
   - SageMaker Runtime Endpoint: Low-latency inference

‚úÖ Security Architecture:
   Internet ‚Üí ALB SG ‚Üí EKS SG ‚Üí VPC Endpoints SG
   (Layered access control)
</code></pre>
<div class="notices success" ><p><strong>üéØ Task 5 Complete - Demo-Ready Hybrid VPC!</strong></p>
<p><strong>Public Access</strong>: ALB provides secure public API demo endpoint<br>
<strong>Private Security</strong>: EKS/SageMaker workloads completely isolated<br>
<strong>High Performance</strong>: &lt; 50ms internal AWS services latency<br>
<strong>Cost Efficient</strong>: $21.6 base + demo usage only when needed<br>
<strong>Production Ready</strong>: SSL, health checks, multi-AZ availability</p>
</div>


<div class="notices tip" ><p><strong>üöÄ Next Steps:</strong></p>
<ul>
<li><strong>Task 6</strong>: ECR container registry for API container images</li>
<li><strong>Task 7</strong>: EKS cluster deployment in private subnets</li>
<li><strong>Task 8</strong>: EKS node groups with auto-scaling</li>
<li><strong>Task 10</strong>: Deploy API service with ALB integration</li>
<li><strong>Task 11</strong>: ALB ingress controller configuration</li>
</ul>
<p><strong>Demo Commands Ready:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Public API demo endpoint (after deployment)</span>
</span></span><span style="display:flex;"><span>curl https://your-alb-dns/predict -d <span style="color:#e6db74">&#39;{&#34;data&#34;: &#34;your-input&#34;}&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Health check endpoint</span>
</span></span><span style="display:flex;"><span>curl https://your-alb-dns/health
</span></span></code></pre></div></div>


<div class="notices info" ><p><strong>üìä Performance Benchmarks Achieved:</strong></p>
<ul>
<li><strong>EKS ‚Üî S3 Latency</strong>: &lt; 50ms (VPC Gateway Endpoint)</li>
<li><strong>EKS ‚Üî ECR Latency</strong>: &lt; 100ms (Interface Endpoints)</li>
<li><strong>ALB ‚Üî EKS Latency</strong>: &lt; 10ms (same VPC)</li>
<li><strong>Internet ‚Üî ALB</strong>: Standard Internet latency</li>
<li><strong>Cost</strong>: $21.6/month base + $0.02/hour demo usage</li>
<li><strong>Availability</strong>: Multi-AZ (99.99% SLA)</li>
</ul>
</div>

<hr>
<p><strong>Next Step</strong>: <a href="/aws-mlops-retail-prediction/5-workshop/6-ecr-registry/">Task 6: ECR Container Registry</a></p>

<div class="notices tip" ><p><strong>üöÄ Next Steps:</strong></p>
<ul>
<li><strong>Task 3</strong>: IAM Roles &amp; IRSA using VPC infrastructure</li>
<li><strong>Task 4</strong>: EKS cluster deployment with VPC Endpoints integration</li>
<li><strong>Task 5</strong>: EKS managed node groups in cost-optimized private subnets</li>
</ul>
</div>

<h2 id="8-clean-up-resources-aws-cli">8. Clean Up Resources (AWS CLI)</h2>
<h3 id="81-delete-application-load-balancer-and-target-groups">8.1. Delete Application Load Balancer and Target Groups</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># List ALB</span>
</span></span><span style="display:flex;"><span>aws elbv2 describe-load-balancers --names mlops-hybrid-api-demo-alb --query <span style="color:#e6db74">&#39;LoadBalancers[*].[LoadBalancerArn,DNSName]&#39;</span> --output table
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete ALB (automatically deletes listeners)</span>
</span></span><span style="display:flex;"><span>aws elbv2 delete-load-balancer --load-balancer-arn &lt;alb-arn&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete Target Groups</span>
</span></span><span style="display:flex;"><span>aws elbv2 describe-target-groups --names mlops-hybrid-eks-api-tg --query <span style="color:#e6db74">&#39;TargetGroups[*].TargetGroupArn&#39;</span> --output text | xargs -I <span style="color:#f92672">{}</span> aws elbv2 delete-target-group --target-group-arn <span style="color:#f92672">{}</span>
</span></span></code></pre></div><h3 id="82-delete-vpc-endpoints">8.2. Delete VPC Endpoints</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># List VPC Endpoints</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-vpc-endpoints --filters <span style="color:#e6db74">&#34;Name=vpc-id,Values=&lt;vpc-id&gt;&#34;</span> --query <span style="color:#e6db74">&#39;VpcEndpoints[*].[VpcEndpointId,ServiceName]&#39;</span> --output table
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete Interface Endpoints (ECR, CloudWatch Logs)</span>
</span></span><span style="display:flex;"><span>aws ec2 delete-vpc-endpoints --vpc-endpoint-ids &lt;ecr-api-endpoint-id&gt; &lt;ecr-dkr-endpoint-id&gt; &lt;logs-endpoint-id&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete Gateway Endpoint (S3)</span>
</span></span><span style="display:flex;"><span>aws ec2 delete-vpc-endpoints --vpc-endpoint-ids &lt;s3-gateway-endpoint-id&gt;
</span></span></code></pre></div><h3 id="83-delete-security-groups">8.3. Delete Security Groups</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># List Security Groups (except default)</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-security-groups --filters <span style="color:#e6db74">&#34;Name=vpc-id,Values=&lt;vpc-id&gt;&#34;</span> --query <span style="color:#e6db74">&#39;SecurityGroups[?GroupName!=`default`].[GroupId,GroupName]&#39;</span> --output table
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete Security Groups (in reverse dependency order)</span>
</span></span><span style="display:flex;"><span>aws ec2 delete-security-group --group-id &lt;vpc-endpoints-sg-id&gt;
</span></span><span style="display:flex;"><span>aws ec2 delete-security-group --group-id &lt;eks-control-plane-sg-id&gt;
</span></span><span style="display:flex;"><span>aws ec2 delete-security-group --group-id &lt;eks-nodes-sg-id&gt;
</span></span><span style="display:flex;"><span>aws ec2 delete-security-group --group-id &lt;alb-sg-id&gt;
</span></span></code></pre></div><h3 id="84-delete-subnets-and-route-tables">8.4. Delete Subnets and Route Tables</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># List Route Tables (except main)</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-route-tables --filters <span style="color:#e6db74">&#34;Name=vpc-id,Values=&lt;vpc-id&gt;&#34;</span> --query <span style="color:#e6db74">&#39;RouteTables[?Associations[0].Main!=`true`].[RouteTableId,Tags[0].Value]&#39;</span> --output table
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete Route Tables</span>
</span></span><span style="display:flex;"><span>aws ec2 delete-route-table --route-table-id &lt;public-rt-id&gt;
</span></span><span style="display:flex;"><span>aws ec2 delete-route-table --route-table-id &lt;private-rt-id&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List Subnets</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-subnets --filters <span style="color:#e6db74">&#34;Name=vpc-id,Values=&lt;vpc-id&gt;&#34;</span> --query <span style="color:#e6db74">&#39;Subnets[*].[SubnetId,Tags[0].Value,CidrBlock]&#39;</span> --output table
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete Subnets</span>
</span></span><span style="display:flex;"><span>aws ec2 delete-subnet --subnet-id &lt;public-subnet-1a-id&gt;
</span></span><span style="display:flex;"><span>aws ec2 delete-subnet --subnet-id &lt;public-subnet-1b-id&gt;
</span></span><span style="display:flex;"><span>aws ec2 delete-subnet --subnet-id &lt;private-subnet-1a-id&gt;
</span></span><span style="display:flex;"><span>aws ec2 delete-subnet --subnet-id &lt;private-subnet-1b-id&gt;
</span></span></code></pre></div><h3 id="85-delete-internet-gateway-and-vpc">8.5. Delete Internet Gateway and VPC</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Detach and delete Internet Gateway</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-internet-gateways --filters <span style="color:#e6db74">&#34;Name=attachment.vpc-id,Values=&lt;vpc-id&gt;&#34;</span> --query <span style="color:#e6db74">&#39;InternetGateways[*].InternetGatewayId&#39;</span> --output text | xargs -I <span style="color:#f92672">{}</span> aws ec2 detach-internet-gateway --internet-gateway-id <span style="color:#f92672">{}</span> --vpc-id &lt;vpc-id&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>aws ec2 delete-internet-gateway --internet-gateway-id &lt;igw-id&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete VPC (last)</span>
</span></span><span style="display:flex;"><span>aws ec2 delete-vpc --vpc-id &lt;vpc-id&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Verify clean up</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-vpcs --vpc-ids &lt;vpc-id&gt;
</span></span></code></pre></div><h3 id="86-clean-up-helper-script">8.6. Clean Up Helper Script</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># vpc-cleanup.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>VPC_ID<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;vpc-xxxxxxxxx&#34;</span>  <span style="color:#75715e"># Replace with actual VPC ID</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;üßπ Cleaning up VPC resources for </span>$VPC_ID<span style="color:#e6db74">...&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1. Delete ALB and Target Groups</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Deleting ALB...&#34;</span>
</span></span><span style="display:flex;"><span>ALB_ARN<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>aws elbv2 describe-load-balancers --names mlops-hybrid-api-demo-alb --query <span style="color:#e6db74">&#39;LoadBalancers[0].LoadBalancerArn&#39;</span> --output text 2&gt;/dev/null<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$ALB_ARN<span style="color:#e6db74">&#34;</span> !<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;None&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">[</span> ! -z <span style="color:#e6db74">&#34;</span>$ALB_ARN<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    aws elbv2 delete-load-balancer --load-balancer-arn $ALB_ARN
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;ALB deleted: </span>$ALB_ARN<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. Delete VPC Endpoints</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Deleting VPC Endpoints...&#34;</span>
</span></span><span style="display:flex;"><span>ENDPOINTS<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>aws ec2 describe-vpc-endpoints --filters <span style="color:#e6db74">&#34;Name=vpc-id,Values=</span>$VPC_ID<span style="color:#e6db74">&#34;</span> --query <span style="color:#e6db74">&#39;VpcEndpoints[*].VpcEndpointId&#39;</span> --output text<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> endpoint in $ENDPOINTS; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    aws ec2 delete-vpc-endpoints --vpc-endpoint-ids $endpoint
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;VPC Endpoint deleted: </span>$endpoint<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. Wait for resources to be deleted</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Waiting for resources to be deleted...&#34;</span>
</span></span><span style="display:flex;"><span>sleep <span style="color:#ae81ff">60</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. Delete Security Groups</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Deleting Security Groups...&#34;</span>
</span></span><span style="display:flex;"><span>SECURITY_GROUPS<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>aws ec2 describe-security-groups --filters <span style="color:#e6db74">&#34;Name=vpc-id,Values=</span>$VPC_ID<span style="color:#e6db74">&#34;</span> --query <span style="color:#e6db74">&#39;SecurityGroups[?GroupName!=`default`].GroupId&#39;</span> --output text<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> sg in $SECURITY_GROUPS; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    aws ec2 delete-security-group --group-id $sg 2&gt;/dev/null
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Security Group deleted: </span>$sg<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;‚úÖ VPC cleanup completed for </span>$VPC_ID<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><hr>
<h2 id="9-vpc-and-networking-pricing-table-ap-southeast-1">9. VPC and Networking Pricing Table (ap-southeast-1)</h2>
<h3 id="91-vpc-core-components-cost">9.1. VPC Core Components Cost</h3>
<table>
  <thead>
      <tr>
          <th>Component</th>
          <th>Price (USD)</th>
          <th>Notes</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>VPC</strong></td>
          <td>Free</td>
          <td>Unlimited VPCs</td>
      </tr>
      <tr>
          <td><strong>Subnets</strong></td>
          <td>Free</td>
          <td>Unlimited subnets</td>
      </tr>
      <tr>
          <td><strong>Route Tables</strong></td>
          <td>Free</td>
          <td>Routing configuration</td>
      </tr>
      <tr>
          <td><strong>Internet Gateway</strong></td>
          <td>Free</td>
          <td>One per VPC</td>
      </tr>
      <tr>
          <td><strong>Security Groups</strong></td>
          <td>Free</td>
          <td>Firewall rules</td>
      </tr>
  </tbody>
</table>
<h3 id="92-vpc-endpoints-cost">9.2. VPC Endpoints Cost</h3>
<table>
  <thead>
      <tr>
          <th>Endpoint Type</th>
          <th>Price (USD/hour)</th>
          <th>Price (USD/month)</th>
          <th>Data Transfer</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Gateway Endpoint (S3)</strong></td>
          <td>Free</td>
          <td>Free</td>
          <td>Free</td>
      </tr>
      <tr>
          <td><strong>Interface Endpoint</strong></td>
          <td>$0.01</td>
          <td>$7.2</td>
          <td>$0.01/GB</td>
      </tr>
      <tr>
          <td><strong>PrivateLink Endpoint</strong></td>
          <td>$0.01</td>
          <td>$7.2</td>
          <td>$0.01/GB</td>
      </tr>
  </tbody>
</table>
<p><strong>VPC Endpoints cost for Task 5:</strong></p>
<ul>
<li>S3 Gateway: Free</li>
<li>ECR API Interface: $7.2/month</li>
<li>ECR DKR Interface: $7.2/month</li>
<li>CloudWatch Logs Interface: $7.2/month</li>
<li><strong>Total:</strong> $21.6/month</li>
</ul>
<h3 id="93-application-load-balancer-cost">9.3. Application Load Balancer Cost</h3>
<table>
  <thead>
      <tr>
          <th>Component</th>
          <th>Price (USD/hour)</th>
          <th>Price (USD/month)</th>
          <th>Notes</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>ALB Fixed Cost</strong></td>
          <td>$0.0225</td>
          <td>$16.2</td>
          <td>Always running</td>
      </tr>
      <tr>
          <td><strong>LCU (Load Balancer Capacity Unit)</strong></td>
          <td>$0.008</td>
          <td>$5.76</td>
          <td>Per LCU-hour</td>
      </tr>
      <tr>
          <td><strong>Rule Evaluations</strong></td>
          <td>$0.008</td>
          <td>$5.76</td>
          <td>Per million requests</td>
      </tr>
  </tbody>
</table>
<p><strong>Estimated ALB cost:</strong></p>
<ul>
<li>Base ALB: $16.2/month</li>
<li>1 LCU (basic usage): $5.76/month</li>
<li><strong>Total ALB:</strong> ~$22/month continuous</li>
</ul>
<h3 id="94-nat-gateway-cost-not-used-in-task-5">9.4. NAT Gateway Cost (Not used in Task 5)</h3>
<table>
  <thead>
      <tr>
          <th>Component</th>
          <th>Price (USD/hour)</th>
          <th>Price (USD/month)</th>
          <th>Data Transfer</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>NAT Gateway</strong></td>
          <td>$0.045</td>
          <td>$32.4</td>
          <td>$0.045/GB</td>
      </tr>
      <tr>
          <td><strong>Data Processing</strong></td>
          <td></td>
          <td></td>
          <td>$0.045/GB</td>
      </tr>
  </tbody>
</table>
<p><strong>Savings:</strong> $32.4/month by using VPC Endpoints instead of NAT Gateway</p>
<h3 id="95-data-transfer-pricing">9.5. Data Transfer Pricing</h3>
<table>
  <thead>
      <tr>
          <th>Transfer Type</th>
          <th>Price (USD/GB)</th>
          <th>Notes</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>VPC Internal</strong></td>
          <td>Free</td>
          <td>Same AZ</td>
      </tr>
      <tr>
          <td><strong>Cross-AZ</strong></td>
          <td>$0.01</td>
          <td>Different AZ in region</td>
      </tr>
      <tr>
          <td><strong>VPC Endpoints</strong></td>
          <td>$0.01</td>
          <td>Interface endpoints</td>
      </tr>
      <tr>
          <td><strong>Internet OUT</strong></td>
          <td>$0.12</td>
          <td>First 1GB free/month</td>
      </tr>
      <tr>
          <td><strong>S3 Transfer</strong></td>
          <td>Free</td>
          <td>Via Gateway endpoint</td>
      </tr>
  </tbody>
</table>
<h3 id="96-estimated-total-cost-for-task-5">9.6. Estimated Total Cost for Task 5</h3>
<p><strong>Monthly Baseline Cost:</strong></p>
<table>
  <thead>
      <tr>
          <th>Component</th>
          <th>Monthly Cost</th>
          <th>Purpose</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>VPC + Subnets + IGW</td>
          <td>$0</td>
          <td>Core networking</td>
      </tr>
      <tr>
          <td>VPC Endpoints (3x Interface)</td>
          <td>$21.6</td>
          <td>ECR + CloudWatch</td>
      </tr>
      <tr>
          <td>S3 Gateway Endpoint</td>
          <td>$0</td>
          <td>Model access</td>
      </tr>
      <tr>
          <td><strong>Subtotal</strong></td>
          <td><strong>$21.6</strong></td>
          <td>Always running</td>
      </tr>
  </tbody>
</table>
<p><strong>Demo Usage Cost:</strong></p>
<table>
  <thead>
      <tr>
          <th>Usage Pattern</th>
          <th>ALB Cost</th>
          <th>Total Cost</th>
          <th>Use Case</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Development (8h/day)</strong></td>
          <td>$5.4/month</td>
          <td>$27/month</td>
          <td>Daily development</td>
      </tr>
      <tr>
          <td><strong>Demo only (3h/day)</strong></td>
          <td>$2.0/month</td>
          <td>$23.6/month</td>
          <td>Presentation demos</td>
      </tr>
      <tr>
          <td><strong>Production (24/7)</strong></td>
          <td>$22/month</td>
          <td>$43.6/month</td>
          <td>Live production</td>
      </tr>
      <tr>
          <td><strong>Testing (1h/day)</strong></td>
          <td>$0.7/month</td>
          <td>$22.3/month</td>
          <td>Occasional testing</td>
      </tr>
  </tbody>
</table>
<h3 id="97-cost-comparison-with-traditional-setup">9.7. Cost Comparison with Traditional Setup</h3>
<p><strong>Task 5 (VPC Endpoints)</strong> vs <strong>Traditional (NAT Gateway)</strong>:</p>
<table>
  <thead>
      <tr>
          <th>Architecture</th>
          <th>Monthly Cost</th>
          <th>Performance</th>
          <th>Security</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>VPC Endpoints</strong></td>
          <td>$21.6</td>
          <td>&lt; 50ms latency</td>
          <td>Private network</td>
      </tr>
      <tr>
          <td><strong>NAT Gateway</strong></td>
          <td>$32.4 + data</td>
          <td>Variable</td>
          <td>Internet routing</td>
      </tr>
      <tr>
          <td><strong>Savings</strong></td>
          <td><strong>-$10.8</strong></td>
          <td><strong>Better</strong></td>
          <td><strong>Higher</strong></td>
      </tr>
  </tbody>
</table>
<h3 id="98-cost-optimization-tips">9.8. Cost Optimization Tips</h3>
<p><strong>Immediate Savings:</strong></p>
<ul>
<li>‚úÖ Use S3 Gateway Endpoint (Free instead of $7.2/month Interface)</li>
<li>‚úÖ Skip NAT Gateway (-$32.4/month)</li>
<li>‚úÖ Turn off ALB when not demoing (-$22/month)</li>
</ul>
<p><strong>Long-term Optimization:</strong></p>
<ul>
<li>Use Spot instances for EKS nodes (60-70% savings)</li>
<li>S3 Intelligent Tiering for model storage</li>
<li>CloudWatch Logs retention policy (7-30 days)</li>
</ul>
<p><strong>Demo Cost Management:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Enable ALB only when demo</span>
</span></span><span style="display:flex;"><span>aws elbv2 create-load-balancer --name demo-alb --type application
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Disable ALB after demo  </span>
</span></span><span style="display:flex;"><span>aws elbv2 delete-load-balancer --load-balancer-arn &lt;arn&gt;
</span></span></code></pre></div>
<div class="notices info" ><p><strong>üí∞ Cost Summary for Task 5:</strong></p>
<ul>
<li><strong>Baseline:</strong> $21.6/month (VPC Endpoints, always on)</li>
<li><strong>Demo usage:</strong> $0.02/hour ALB (only when needed)</li>
<li><strong>Savings:</strong> $10.8/month compared to NAT Gateway approach</li>
<li><strong>Performance:</strong> &lt; 50ms internal latency guaranteed</li>
</ul>
</div>

<hr>

<div class="notices info" ><p><strong><em>Console-created resources</em></strong> ready for subsequent tasks:</p>
<ul>
<li>VPC ID, subnet IDs for EKS cluster creation</li>
<li>Security Group IDs for EKS and ALB configuration</li>
<li>VPC Endpoint IDs for cost-optimized AWS services access</li>
</ul>
</div>

<hr>
<h2 id="-task-5-implementation-video">üìπ Task 5 Implementation Video</h2>
<div style="position: relative; width: 100%; max-width: 2000px; margin: 0 auto; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe 
    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" 
    src="https://www.youtube.com/embed/watch?v=rVhZpuD1dgE&list=PL53MEKrSAUpu0i5F-ttcVdKkSv0jb48Mc&index=4" 
    title="YouTube video player" 
    frameborder="0" 
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
    referrerpolicy="strict-origin-when-cross-origin" 
    allowfullscreen>
  </iframe>
</div>
<hr>
<p><strong>Next Step</strong>: <a href="/aws-mlops-retail-prediction/5-workshop/6-ecr-registry/">Task 06: ECR Registry</a></p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/aws-mlops-retail-prediction/5-workshop/4-sagemaker-training/" title="End-to-End Model Training Pipeline"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/aws-mlops-retail-prediction/5-workshop/6-ecr-registry/" title="Amazon ECR Container Registry (MLOps)" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/aws-mlops-retail-prediction/js/clipboard.min.js?1765387715"></script>
    <script src="/aws-mlops-retail-prediction/js/perfect-scrollbar.min.js?1765387715"></script>
    <script src="/aws-mlops-retail-prediction/js/perfect-scrollbar.jquery.min.js?1765387715"></script>
    <script src="/aws-mlops-retail-prediction/js/jquery.sticky.js?1765387715"></script>
    <script src="/aws-mlops-retail-prediction/js/featherlight.min.js?1765387715"></script>
    <script src="/aws-mlops-retail-prediction/js/highlight.pack.js?1765387715"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/aws-mlops-retail-prediction/js/modernizr.custom-3.6.0.js?1765387715"></script>
    <script src="/aws-mlops-retail-prediction/js/learn.js?1765387715"></script>
    <script src="/aws-mlops-retail-prediction/js/hugo-learn.js?1765387715"></script>

    <link href="/aws-mlops-retail-prediction/mermaid/mermaid.css?1765387715" rel="stylesheet" />
    <script src="/aws-mlops-retail-prediction/mermaid/mermaid.js?1765387715"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
